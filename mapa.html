<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perímetros do Requalifica Centro</title>
    <!-- leaflet CSS-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>

    <!-- Carrega o Jquery-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


</head>

<body>
    <div id="map" style="width: auto; height: 100vh"> </div>
    <script>

        // Centraliza o mapa na região desejada 
        var map = L.map('map', {
            center: [-23.543, -46.633],
            zoom: 14.0
        });

        // Adiciona os mapas base

        var streets = L.tileLayer('https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {});
        var satelite = L.tileLayer('http://mt1.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}', {});
        var gray = L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaHVnb25iZyIsImEiOiJjanFza2JmaTQwZDllNDNyeGtub3VsODZ0In0.eYH5xYQqrhVWaKIndItTOw', {

            tileSize: 512,
            zoomOffset: -1,
        })
        gray.addTo(map)

        map.attributionControl.addAttribution('© <a href="https://www.mapbox.com/">Mapbox</a>');
        map.attributionControl.addAttribution('© <a href="https://www.google.com/">Google</a>');

        var baselayers = {
            'Google Earth': satelite,
            'Google Streets': streets,
            'Mapbox': gray
        };



        /*
        // load GeoJSON from an external file
        $.getJSON("perimetro_total_requalifica.geojson", function (data) {
            // add GeoJSON layer to the map once the file is loaded
            L.geoJson(data, {
                //Define o estilo da camada
                color: 'orange',
                weight: 5,
                opacity: 1,
                fillOpacity: 0.2

            }).addTo(map);
        });
        */

        /*
        // load GeoJSON from an external file
        $.getJSON("perimetro_requalifica.geojson", function (data) {
            // add GeoJSON layer to the map once the file is loaded
            L.geoJson(data, {
                //fillColor: 'orange',
                color: 'orange',
                weight: 5,
                //opacity: 0.5,
                fillOpacity: 0.3,
                onEachFeature: function (feature, layer) {
                    layer.bindPopup('<b>Descrição:</b> ' + '<p align = justify>' + feature.properties.Descrição + '</p>');
                }
            }).addTo(map);
        }); */

        // load GeoJSON from an external file
        $.getJSON("perimetro_requalifica.geojson", function (data) {
            // add GeoJSON layer to the map once the file is loaded
            L.geoJson(data, {

                style: function (feature) {
                    switch (feature.properties.fid) {
                        case 1: return { color: "orange" };
                        case 2: return { color: "#f5cf65" };
                    }
                },

                onEachFeature: function (feature, layer) {
                    layer.bindPopup('<b>Descrição:</b> ' + '<p align = justify>' + feature.properties.Descrição + '</p>');
                }
            }).addTo(map);
            
        });

        // display the control (switcher list) on the map, by default in the top right corner
        L.control.layers(baselayers, null, {collapsed:false}).addTo(map);

    </script>
</body>

</html>